<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decentralized Voting System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.9.0/ethers.umd.min.js"></script>
</head>
<body>
    <!--Will be redirected to LOGIN PART-->
</body>
<script>
    const abi = [{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_userAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"_currentTimestamp","type":"uint256"}],"name":"addedNewUser","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_votingOptionID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_currentTime","type":"uint256"}],"name":"newOptionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_votePublisher","type":"address"},{"indexed":false,"internalType":"uint256","name":"_pollID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_currentTime","type":"uint256"}],"name":"newPollCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_currentTime","type":"uint256"}],"name":"newVote","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_userAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_votingOptionID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_currentTimestamp","type":"uint256"}],"name":"optionDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_userAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_currentTimestamp","type":"uint256"}],"name":"pollDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_userAddress","type":"address"},{"indexed":false,"internalType":"enum VotingSystem.UserType","name":"_userType","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_currentTimestamp","type":"uint256"}],"name":"userLoggedIn","type":"event"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"internalType":"string","name":"_name","type":"string"}],"name":"addVotingOption","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"addresses","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"enum VotingSystem.UserType","name":"_userType","type":"uint8"}],"name":"checkAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"checkHasStarted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_description","type":"string"},{"internalType":"uint256","name":"_timeLeft","type":"uint256"}],"name":"createPoll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"deletePendingPoll","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"internalType":"uint256","name":"_votingOptionID","type":"uint256"}],"name":"deleteVotingOption","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getAllActivePollsVOTER","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllActivePollsVP","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllFinishedPollsVOTER","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllFinishedPollsVP","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllPendingPollsVP","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAllVotedPollsVOTER","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"internalType":"struct VotingSystem.VotingPoll[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getAllVotingOptions","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"internalType":"struct VotingSystem.VotingOption[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getStatistics","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"internalType":"struct VotingSystem.VotingOption[]","name":"","type":"tuple[]"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getVotingPollDescription","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getVotingPollName","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getVotingPollStatus","outputs":[{"internalType":"enum VotingSystem.Status","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"getVotingPollTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"hasStarted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"hasVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"isPublisher","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"}],"name":"startVotingPoll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userRoles","outputs":[{"internalType":"enum VotingSystem.UserType","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_votingPollID","type":"uint256"},{"internalType":"uint256","name":"_votingOptionID","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"votingOptionsByPoll","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingPollCounterID","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"votingPolls","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"votePublisher","type":"address"},{"internalType":"uint256","name":"timeLeft","type":"uint256"},{"internalType":"enum VotingSystem.Status","name":"status","type":"uint8"}],"stateMutability":"view","type":"function"}]
    const address = "0x9816e5038ba5a3ee6bfa7aad69e8380ab1fa8dae";

    window.onload = function() {
        let loggedIn = localStorage.getItem("loggedIn");
        let votePublisher = localStorage.getItem("votepublisher");
        let voter = localStorage.getItem("voter");
        let address = localStorage.getItem("address");

        if(votePublisher == "true"){
            window.location.href = 'http://localhost:8888//DecentralizedVotingSystem_OrhanHuseinbegovic/votepublisher.html';
            console.log("Redirected to the Vote Publisher Panel");
        }
        else if(voter == "true") {
            window.location.href = 'http://localhost:8888//DecentralizedVotingSystem_OrhanHuseinbegovic/voter.html';
            console.log("Redirected to the Voter Panel");
        }
        else if(address === null){
            window.location.href = 'http://localhost:8888//DecentralizedVotingSystem_OrhanHuseinbegovic/login.html';
            console.log("Redirected to the Login page");
        }
        else{
            window.location.href = 'http://localhost:8888//DecentralizedVotingSystem_OrhanHuseinbegovic/login.html';
            console.log("Redirected to the Login Page");
        }
    };

    //IF NOT LOGGED IN TO THE SYSTEM AS VOTER OR VOTE PUBLISHER
    //OR NOT LOGGED IN
    //THEN REDIRECT TO THE login.html

</script>
</html>